<div>
  <h1 class="font-bold text-4xl">Dashboard#index</h1>
  <p>Find me in <code>app/views/dashboard/index.html.erb</code></p>

  <% if @access_token %>
    <div style="margin-top: 2rem;">
      <h2 class="font-semibold text-2xl">Access Token:</h2>
      <div style="position: relative; margin-top: 1rem;">
        <pre id="access-token" style="background-color: #f3f3f3; padding: 1rem; border-radius: 5px; overflow-x: auto;">
<%= @access_token %>
        </pre>
        <button onclick="copyToken()" style="margin-top: 1rem; background-color: #4CAF50; color: white; padding: 0.5rem 1rem; border: none; border-radius: 4px; cursor: pointer;">
          Copy
        </button>
      </div>
    </div>
  <% end %>

  <div style="margin-top: 2rem;">
    <%= button_to 'Logout', '/auth/logout', method: :get, data: { turbo: false }, class: 'bg-red-500 hover:bg-red-600 text-white py-2 px-4 rounded' %>
    <%= button_to 'Home', '/auth/auth0', method: :post, data: { turbo: false } %>
  </div>
</div>

<script>
  function copyToken() {
    const tokenElement = document.getElementById("access-token");
    const token = tokenElement.innerText.trim();
    navigator.clipboard.writeText(token).then(() => {
      alert("Token copied to clipboard!");
    }).catch(err => {
      alert("Failed to copy token.");
      console.error(err);
    });
  }
</script>
